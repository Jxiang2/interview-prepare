{"version":3,"file":"bundle.js","mappings":"mgBA+BA,cACE,WAAaA,G,OACX,YAAMA,IAAG,KAUb,OAZyD,OAKvD,YAAAC,aAAA,WACE,OAAOC,KAAKC,UAAUC,KAAKJ,KAG7B,YAAAK,kBAAA,SAAkBC,GAChBF,KAAKJ,GAAKE,KAAKK,MAAMD,IAEzB,EAZA,CAjBA,WAGE,WAAaN,GAFH,KAAAA,GAAK,GAGTA,IACFI,KAAKJ,GAAKA,GAUhB,OAPE,YAAAQ,IAAA,SAAIC,GACF,OAAOL,KAAKJ,GAAGS,IAGjB,YAAAC,IAAA,SAAID,EAAOE,GACTP,KAAKJ,GAAGS,GAAME,GAElB,EAfA,IAiCMC,EAAO,IAAIC,EAAmC,CAClDC,EAAG,GAAIC,EAAG,KAGZH,EAAKF,IAAI,MAAO,IAChBM,QAAQC,IAAIL,EAAKJ,IAAI,QAErB,IAAMU,EAAQN,EAAKX,eACnBe,QAAQC,IAAIC,GAEZN,EAAKF,IAAI,MAAO,IAChBM,QAAQC,IAAIL,EAAKJ,IAAI,QAErB,IAAMW,EAAQ,IAAIN,EAElBM,EAAMd,kBAAkBa,GACxBF,QAAQC,IAAIE,GAEZH,QAAQC,IAAIE,EAAMX,IAAI,WC7DF,Q","sources":["webpack://ts/./src/4.oop.ts","webpack://ts/webpack/startup"],"sourcesContent":["interface Database<T, K> {\n  get(id: T): K;\n\n  set(id: T, value: K): void;\n}\n\ninterface Persistable {\n  saveToString(): string;\n\n  restoreFromString(storedState: string): void;\n}\n\ntype DBKeyType = string | number | symbol;\n\nclass InMemoryDatabase<T extends DBKeyType, K> implements Database<T, K> {\n  protected db = {} as Record<T, K>;\n\n  constructor (db?: Record<T, K>) { // allow paramterized constructor\n    if (db)\n      this.db = db;\n  }\n\n  get(id: T): K {\n    return this.db[id];\n  }\n\n  set(id: T, value: K): void {\n    this.db[id] = value;\n  }\n}\n\nclass PersistentMemoryDB<T extends DBKeyType, K> extends InMemoryDatabase<T, K> implements Persistable {\n  constructor (db?: Record<T, K>) {\n    super(db); // call parent constructor, to access parent FIELDS\n  }\n\n  saveToString(): string {\n    return JSON.stringify(this.db);\n  }\n\n  restoreFromString(storedState: string): void {\n    this.db = JSON.parse(storedState);\n  }\n}\n\n\n// tests\nconst myDB = new PersistentMemoryDB<string, number>({\n  x: 10, y: 20\n});\n\nmyDB.set(\"foo\", 22);\nconsole.log(myDB.get(\"foo\"));\n\nconst saved = myDB.saveToString();\nconsole.log(saved);\n\nmyDB.set(\"foo\", 23);\nconsole.log(myDB.get(\"foo\"));\n\nconst myDB2 = new PersistentMemoryDB<string, number>();\n\nmyDB2.restoreFromString(saved);\nconsole.log(myDB2);\n\nconsole.log(myDB2.get(\"foo\"));","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = {};\n__webpack_modules__[439]();\n"],"names":["db","saveToString","JSON","stringify","this","restoreFromString","storedState","parse","get","id","set","value","myDB","PersistentMemoryDB","x","y","console","log","saved","myDB2"],"sourceRoot":""}